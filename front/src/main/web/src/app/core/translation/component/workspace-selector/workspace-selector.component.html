<form [formGroup]="parts">
    <mat-chip-list #workspacesList
                   aria-orientation="horizontal"
                   class="workspaces-list"
                   [formControlName]="'list'">
        <mat-chip
                *ngFor="let workspace of value"
                [selectable]="true"
                [removable]="true"
                (removed)="remove(workspace)">
            <span [class]="(getRepository(workspace) | async)?.type  | repositoryIcon" class="app-workspace-selector-icon"></span>
            {{(getRepository(workspace) | async)?.name}} {{workspace.branch}}
            <mat-icon matChipRemove>cancel</mat-icon>
        </mat-chip>

        <input
                [placeholder]="labelKey | translate"
                [formControlName]="'input'"
                [matAutocomplete]="auto"
                [matChipInputFor]="workspacesList"
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                [matChipInputAddOnBlur]="true"
                (matChipInputTokenEnd)="onTokenEnd($event)">
    </mat-chip-list>
    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
        <mat-option *ngFor="let workspace of filteredWorkspaces$ | async" [value]="workspace">
            <span [class]="(getRepository(workspace) | async)?.type  | repositoryIcon" class="app-workspace-selector-icon"></span>
            {{(getRepository(workspace) | async)?.name}} {{workspace.branch}}
        </mat-option>
    </mat-autocomplete>
</form>
